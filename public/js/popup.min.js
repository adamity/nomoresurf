import{getBlocklist,getActiveTab}from"./controller.min.js";const blockSiteBtn=document.getElementById("blockSiteBtn"),editBlocklistBtn=document.getElementById("editBlocklistBtn");let activeTab=null,targetURL=null,blocklist=[];async function init(){activeTab=await getActiveTab(),targetURL=new URL(activeTab.url),"http:"!=targetURL.protocol&&"https:"!=targetURL.protocol?(blockSiteBtn.innerText="This site cannot be blocked",blockSiteBtn.disabled=!0):(blocklist=await getBlocklist(),blocklist.includes(targetURL.hostname)?(blockSiteBtn.innerText="This site is already blocked",blockSiteBtn.disabled=!0):(blockSiteBtn.innerHTML=`Block <span class="text-lowercase">${targetURL.hostname}</span>`,blockSiteBtn.addEventListener("click",(()=>{blocklist.push(targetURL.hostname),chrome.storage.sync.set({blocklist:blocklist}),window.close()}))))}init(),editBlocklistBtn.addEventListener("click",(()=>{chrome.runtime.openOptionsPage?chrome.runtime.openOptionsPage():window.open(chrome.runtime.getURL("options.html"))}));