let blockSiteBtn=document.getElementById("blockSiteBtn"),editBlocklistBtn=document.getElementById("editBlocklistBtn");async function blockSite(){let[t]=await chrome.tabs.query({active:!0,currentWindow:!0});if(targetURL=new URL(t.url),blockSiteBtn.innerText=`Block ${targetURL.hostname}`,"http:"!=targetURL.protocol&&"https:"!=targetURL.protocol)blockSiteBtn.innerText="This site cannot be blocked",blockSiteBtn.disabled=!0;else{await fetch(`https://logo.clearbit.com/${targetURL.hostname}`);chrome.storage.sync.get("blocklist",(function(t){t.blocklist.includes(targetURL.hostname)&&(blockSiteBtn.innerText="This site is already blocked",blockSiteBtn.disabled=!0)}))}}blockSite(),blockSiteBtn.addEventListener("click",(async()=>{let[t]=await chrome.tabs.query({active:!0,currentWindow:!0});targetURL=new URL(t.url),targetURL.hostname.includes(".")&&chrome.storage.sync.get(["blocklist"],(function(t){let e=t.blocklist;e.includes(targetURL.hostname)||(e.push(targetURL.hostname),chrome.storage.sync.set({blocklist:e}))}))})),editBlocklistBtn.addEventListener("click",(async()=>{chrome.runtime.openOptionsPage?chrome.runtime.openOptionsPage():window.open(chrome.runtime.getURL("options.html"))}));