import{getBlocklist,getIsWhitelist}from"./controller.min.js";chrome.runtime.onInstalled.addListener((()=>{chrome.storage.sync.set({blocklist:[]}),chrome.storage.sync.set({isWhitelist:!1})})),chrome.tabs.onUpdated.addListener((async(t,e,s)=>{const o=new URL(s.url),r=await getBlocklist(),i=await getIsWhitelist();"http:"!=o.protocol&&"https:"!=o.protocol||(r.includes(o.hostname)&&!i||!r.includes(o.hostname)&&i)&&chrome.tabs.update(t,{url:chrome.runtime.getURL(`redirect.html?url=${o.hostname}`)})}));